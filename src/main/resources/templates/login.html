<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.w3.org/1999/xhtml" layout:decorate="~{layout/nohead}">
<head th:include="layout/nohead::htmlhead(title='登录')"></head>
<body>
<scetion layout:fragment="content">
    <div class="login_form_bg">
        <div class="login_form_wrap clearfix">
            <div class="login_banner fl"></div>
            <div class="slogan fl">日夜兼程 · 急速送达</div>

            <div class="login_form fr">
                <div class="login_title clearfix">
                    <h1>用户登录</h1>
                    <a href="/reg">立即注册</a>
                </div>
                <div class="form_input">
                    <form id="loginForm">
                        <input type="text" name="username" class="name_input" placeholder="请输入用户名">
                        <div class="user_error"></div>
                        <input type="password" name="password" class="pass_input" placeholder="请输入密码">
                        <div class="pwd_error"></div>
                        <div class="more_input clearfix">
                            <input type="checkbox" name="rememberMe">
                            <label>记住用户名</label>
                            <a href="#">忘记密码</a>
                        </div>
                        <input type="button" id="login" value="登录" class="input_submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(function(){
            $('#login').click(function() {
                $.ajax({
                    type: "POST",
                    url: "/login",
                    contentType: 'application/x-www-form-urlencoded;charset=utf-8',
                    data: $("#loginForm").serialize(),
                    dataType: "json",
                    success: function(data){
                        if(data.status==200){
                            sessionStorage.setItem("token",data.data.token);
                            window.location.href="/";
                        }else if(data.status==400){
                            for(var key in data.data){
                                $("."+key).text(data.data[key])
                                $("."+key).show()
                            }

                        }
                    },
                    error:function(e){
                        console.log(e);
                    }
                });
            });
        })
    </script>
</scetion>

</body>
</html>


